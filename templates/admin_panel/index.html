{% load static %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Barangay AI</title>
	<link rel="apple-touch-icon" sizes="180x180" href="{% static 'src/images/BRGY_TAGAPO LOGO.png' %}" />
	<link rel="icon" type="image/png" sizes="16x16" href="{% static 'src/images/BRGY_TAGAPO LOGO.png' %}" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="{% static 'vendors/styles/core.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'vendors/styles/icon-font.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'src/plugins/datatables/css/responsive.bootstrap4.min.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'vendors/styles/style.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'vendors/styles/index.css' %}">

	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-119386393-1');
	</script>

	<style>
			  .pre-loader {
			background-image: url("{% static 'src/images/hall.jpg' %}"); /* Replace with your image URL */
			background-size: cover; /* Ensures the image covers the entire pre-loader background */
			background-position: center; /* Centers the image */
			background-repeat: no-repeat; /* Prevents the image from repeating */
			position: fixed;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
			z-index: 9999;
			display: flex;
			justify-content: center;
			align-items: center;
		}
	</style>
	
</head>
<body>
	<div class="pre-loader">
        <div class="pre-loader-box">
            <div class="loader-logo">
                <img src="{%static 'src/images/BRGY_TAGAPO LOGO.png' %}" alt="AI Logo">
            </div>
            <div class="loader-progress" id="progress_div">
                <div class="bar" id="bar1"></div>
            </div>
            <div class="percent" id="percent1"></div>
            <div class="loading-text">
                Loading...
            </div>
        </div>
    </div>

	<div class="header">
		<div class="header-left">
			<div class="menu-icon dw dw-menu"></div>
		</div>
		<div class="header-right">
			<div class="dashboard-setting user-notification">
				<div class="dropdown">
					<a class="dropdown-toggle no-arrow" href="javascript:;" data-toggle="right-sidebar">
						<i class="dw dw-settings2"></i>
					</a>
				</div>
			</div>
	
			{% include 'admin_panel/notification.html' %}
	
			{% include 'admin_panel/dropdown.html' %}
		</div>
	</div>
	
	{% include 'admin_panel/right_sidebar.html' %}

	{% include 'admin_panel/left_sidebar.html' %}

	<div class="mobile-menu-overlay"></div>
	<div class="main-container">
		<div class="pd-ltr-20">
			<div class="card-box pd-20 height-100-p mb-30" style="position: relative;">
				<div class="row align-items-center">
					<div class="col-md-4">
						<img src="{%static 'vendors/images/banner-img.png' %}" alt="Banner">
					</div>
					<div class="col-md-6">
						<h4 class="font-20 weight-500 mb-10 text-capitalize">
							Welcome back <div class="weight-600 font-30 text-blue" id="welcome-name"></div>
						</h4>
					</div>
					<div class="col-md-2" style="position: absolute; top: 10px; right: 150px;">
						<div id="date-display" class="weight-500 font-20 text-black" style="white-space: nowrap;"></div>
					</div>
				</div>
			</div>
	
			<!-- Cards Section -->
			<div class="row mt-4">
				<div class="col-md-4">
					<div class="card">
						<div class="card-body">
							<img src="{%static 'src/images/child mal.png' %}" alt="Child Malnourished" class="card-img">
							<h5 class="card-title">Child Malnourished</h5>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="card">
						<div class="card-body">
							<img src="{%static 'src/images/maternal.png' %}" alt="Maternal" class="card-img">
							<h5 class="card-title">Maternal</h5>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="card">
						<div class="card-body">
							<img src="{%static 'src/images/total.jpg' %}" alt="Total" class="card-img">
							<h5 class="card-title">Total</h5>
						</div>
					</div>
				</div>
			</div>
	
				<div class="container">
					<div class="row">
						<!-- Bar Chart Section -->
						<div class="col-md-7">
							<div class="card">
								<div class="card-body">
									<h3>Activity 2024</h3>
									<div class="chart-container">
										<canvas id="activityChart"></canvas>
									</div>
								</div>
							</div>
						</div>
		
						<!-- Pie Chart Section (Wider) -->
						<div class="col-md-5">
							<div class="card">
								<div class="card-body">
									<h3>Month of August 2024</h3>
									<div class="chart-container">
										<canvas id="augustPieChart"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>	
			</div>			
				<div class="footer-wrap pd-20 mb-20 card-box">
					All rights reserved.
				</div>
	
	<!-- js -->
	<script src="{%static 'vendors/scripts/core.js' %}"></script>
	<script src="{%static 'vendors/scripts/script.min.js' %}"></script>
	<script src="{%static 'vendors/scripts/process.js' %}"></script>
	<script src="{%static 'vendors/scripts/layout-settings.js' %}"></script>
	<script src="{%static 'src/plugins/apexcharts/apexcharts.min.js' %}"></script>
	<script src="{%static 'src/plugins/datatables/js/jquery.dataTables.min.js' %}"></script>
	<script src="{%static 'src/plugins/datatables/js/dataTables.bootstrap4.min.js' %}"></script>
	<script src="{%static 'src/plugins/datatables/js/dataTables.responsive.min.js' %}"></script>
	<script src="{%static 'src/plugins/datatables/js/dataTables.bootstrap4.min.js' %}"></script>
	<script src="{%static 'vendors/scripts/dashboard.js' %}"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


	<script>
		document.addEventListener('DOMContentLoaded', function() {
        // Load profile name and image from local storage
        const profileName = localStorage.getItem('profileName');
        const profileImage = localStorage.getItem('profileImage');

		console.log('Loaded profile name:', profileName); // Debugging log
    	console.log('Loaded profile image:', profileImage); // Debugging log

        // Update the dropdown with the stored profile data
        if (profileName) {
            document.getElementById('dropdown-profile-name').textContent = profileName;
        }

        if (profileImage) {
            document.getElementById('dropdown-profile-picture').src = profileImage;
        }
    });

		document.addEventListener('DOMContentLoaded', function() {
			// Retrieve profile name from localStorage
			const profileData = JSON.parse(localStorage.getItem('profileData'));
			const profileName = profileData ? profileData.fullName : 'User';
	
			// Update the welcome message on the dashboard
			document.getElementById('welcome-name').textContent = profileName;
			
			// Display the current date (optional)
			const dateDisplay = document.getElementById('date-display');
			const now = new Date();
			dateDisplay.textContent = now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
		});
	

	function updateDate() {
        const dateElement = document.getElementById('date-display');
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        const today = new Date().toLocaleDateString(undefined, options);
        dateElement.textContent = today;
    }

    updateDate();
    setInterval(updateDate, 1000 * 60 * 60 * 24); // Update date daily


	const activityCtx = document.getElementById('activityChart').getContext('2d');
const activityChart = new Chart(activityCtx, {
    type: 'bar',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'], // Months
        datasets: [
            {
                label: 'Under Weight',
                backgroundColor: 'yellow',
                data: [5, 10, 15, 5, 5, 5] // Underweight data
            },
            {
                label: 'Normal',
                backgroundColor: 'green',
                data: [25, 20, 25, 30, 20, 20] // Normal data
            }
        ]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false, // Ensures the chart fills the container properly
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Pie chart for the month of August 2024
const pieCtx = document.getElementById('augustPieChart').getContext('2d');
const augustPieChart = new Chart(pieCtx, {
    type: 'pie',
    data: {
        labels: ['Underweight', 'Normal', 'Overweight'],
        datasets: [{
            label: 'August 2024 Data',
            data: [40, 50, 10], // Percentages for underweight, normal, overweight
            backgroundColor: ['yellow', 'green', 'orange'],
            hoverOffset: 4
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false, // Ensures the chart fills the container properly
    }
});
	</script>
</body>
</html>